# app.py
import streamlit as st

st.set_page_config(page_title="MBTI 진로 추천 🌟", layout="centered")

# 친근한 헤더
st.title("MBTI로 알아보는 진로 추천 ✨")
st.write("내 성격(MBTI)을 골라봐! 해당 유형에 어울리는 진로 2가지를 추천해줄게. 😊\n\n"
         "각 진로마다 적합한 학과(전공)와 어떤 성격의 사람이 잘 맞는지도 알려줘요.")

# MBTI 리스트 (16개)
mbti_types = [
    "ISTJ","ISFJ","INFJ","INTJ",
    "ISTP","ISFP","INFP","INTP",
    "ESTP","ESFP","ENFP","ENTP",
    "ESTJ","ESFJ","ENFJ","ENTJ"
]

selected = st.selectbox("당신의 MBTI를 골라주세요", mbti_types)

# 데이터: 각 MBTI -> [ (진로명, 학과/전공 추천, 적합한 성격(짧게)) , (... ) ]
career_map = {
    "ISTJ": [
        ("행정/공기업 직무", "행정학, 경영학, 법학", "규칙적이고 책임감 강한 사람 🧾"),
        ("회계/감사", "회계학, 경영학", "세심하고 성실한 사람 💼")
    ],
    "ISFJ": [
        ("간호/보건의료", "간호학, 보건학", "배려심 많고 안정 지향적인 사람 🩺"),
        ("교육(초중등)", "교육학, 아동학", "학생 돌봄을 좋아하는 사람 🍎")
    ],
    "INFJ": [
        ("상담심리/임상", "심리학, 상담학", "사람 마음에 깊이 공감하는 사람 💬"),
        ("사회복지/NGO", "사회복지학, 국제학", "가치 중심으로 일하고 싶은 사람 🌱")
    ],
    "INTJ": [
        ("연구개발(R&D)", "전공: 이공계(수학, 컴공, 전기 등)", "전략적 사고와 독립성 있는 사람 🔬"),
        ("전략기획/컨설팅", "경영학, 경제학, 통계학", "큰 그림 그리기를 좋아하는 사람 📈")
    ],
    "ISTP": [
        ("기계/설계 엔지니어", "기계공학, 전기공학, 자동차공학", "손으로 만들고 분석하는 걸 좋아하는 사람 🔧"),
        ("IT 개발자(프로그래밍)", "컴퓨터공학, 소프트웨어학", "문제 해결형, 실용적 성향 👨‍💻")
    ],
    "ISFP": [
        ("디자인(시각/제품)", "디자인학, 산업디자인", "감성적이고 미적 감각이 있는 사람 🎨"),
        ("예술/공연(음악, 무대)", "예술학, 음악학", "자유롭고 표현을 좋아하는 사람 🎭")
    ],
    "INFP": [
        ("문예창작/콘텐츠 제작", "국문학, 창작과비평, 영상학", "가치 중심 창의적 사고를 가진 사람 ✍️"),
        ("심리상담/상담직", "심리학, 상담학", "타인에게 공감하고 돕기를 좋아하는 사람 🤝")
    ],
    "INTP": [
        ("데이터 사이언스/연구", "통계학, 컴공, 수학", "논리적 분석과 호기심이 많은 사람 📊"),
        ("소프트웨어 아키텍트/개발", "컴퓨터공학, 소프트웨어", "이론적 문제 해결을 즐기는 사람 🧠")
    ],
    "ESTP": [
        ("영업/세일즈", "경영학, 마케팅", "즉각적 상황판단과 설득에 능한 사람 💬"),
        ("응급구조/현장직", "응급구조학, 스포츠과학", "실무 중심으로 빠르게 움직이기 좋아하는 사람 🚑")
    ],
    "ESFP": [
        ("엔터테인먼트(방송/무대)", "연기/방송학, 공연예술", "사람들 앞에서 빛나는 걸 좋아하는 사람 🌟"),
        ("이벤트 기획/리테일 마케팅", "경영학, 관광학", "현장감 있고 사교적인 사람 🎉")
    ],
    "ENFP": [
        ("콘텐츠 크리에이터/마케팅", "광고홍보, 미디어, 문예창작", "창의적이고 에너지 넘치는 사람 🚀"),
        ("창업/스타트업", "경영학, 디자인씽킹 관련", "새로운 것 시도하는 걸 즐기는 사람 💡")
    ],
    "ENTP": [
        ("사업개발/컨설팅", "경영학, 경제학, 법학", "토론 좋아하고 아이디어 내는 사람 🧩"),
        ("제품기획(PM)/스타트업", "경영, 공학 융합 전공", "변화와 도전을 즐기는 사람 ⚙️")
    ],
    "ESTJ": [
        ("공공행정/관리자", "행정학, 경영학", "주도적이고 체계적인 리더형 사람 🏛️"),
        ("프로젝트 매니저(PM)", "경영학, 산업공학", "계획 세우고 실행 좋아하는 사람 📋")
    ],
    "ESFJ": [
        ("교육/서비스 매니저", "교육학, 사회복지, 경영학", "사람 챙기기를 좋아하는 친화력 있는 사람 🤝"),
        ("인사(HR)/고객관리(CS)", "경영학, 심리학", "조직에서 사람을 돌보는 역할이 잘 맞음 💼")
    ],
    "ENFJ": [
        ("HR/조직개발", "심리학, 경영학", "사람의 성장에 신경쓰는 리더형 사람 🌱"),
        ("마케팅/브랜딩", "광고홍보, 커뮤니케이션", "타인 설득과 공감이 뛰어난 사람 📣")
    ],
    "ENTJ": [
        ("경영자/임원", "경영학, 경제학", "목표지향적이고 리더십 있는 사람 🦁"),
        ("전략컨설팅/투자은행(IB)", "경영, 경제, 통계", "결단력 있고 분석적인 사람 💼")
    ],
}

# 결과 표시
st.markdown("---")
st.subheader(f"🔎 {selected}에게 어울리는 진로")
careers = career_map.get(selected, [])

for idx, (title, majors, personality) in enumerate(careers, start=1):
    with st.container():
        cols = st.columns([1, 9])
        # 작지만 센스있는 이모지
        emoji = "🏆" if idx == 1 else "✨"
        cols[0].markdown(f"### {emoji}")
        cols[1].markdown(f"**{title}**")
        cols[1].write(f"- **추천 학과(전공)**: {majors}")
        cols[1].write(f"- **어떤 성격이 잘 맞을까?**: {personality}")
        cols[1].write("---")

# 추가 설명 및 팁
st.info("💡 팁: 추천은 일반적 성향 기준이에요. 같은 MBTI라도 개인 차가 있으니, "
        "직업체험·동아리·인턴 등으로 직접 경험해보는 걸 추천해요!")

# 간단한 텍스트 다운로드 버튼 (결과 요약을 파일로 저장)
def make_summary(mbti, careers):
    lines = [f"MBTI: {mbti}\n"]
    for i, (title, majors, personality) in enumerate(careers, start=1):
        lines.append(f"{i}. {title}\n   - 추천 학과: {majors}\n   - 적합 성격: {personality}\n")
    return "\n".join(lines)

summary_text = make_summary(selected, careers)
st.download_button("결과 내려받기 (.txt)", summary_text, file_name=f"{selected}_career_suggestions.txt", mime="text/plain")

# 푸터
st.markdown("---")
st.write("Made with ❤️ — 필요하면 진로 설명 문장이나 추천 직업을 더 다듬어줄게!")
